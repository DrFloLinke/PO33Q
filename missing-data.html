<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Missing Data |  PO33Q: Determinants of Democracy –   Analysing Emergence, Survival, and Fall</title>
<meta name="generator" content="bookdown 0.43 with bs4_book()">
<meta property="og:title" content="Missing Data |  PO33Q: Determinants of Democracy –   Analysing Emergence, Survival, and Fall">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Missing Data |  PO33Q: Determinants of Democracy –   Analysing Emergence, Survival, and Fall">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Lexend-0.4.10/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.9.0/transition.js"></script><script src="libs/bs3compat-0.9.0/tabs.js"></script><script src="libs/bs3compat-0.9.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
          margin-bottom: 0em;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
<meta name="description" content="Options in R Missing data is a real problem in doing empirical research. What compounds this problem is that developing countries are more affected than developed ones. Ironically, we are more...">
<meta property="og:description" content="Options in R Missing data is a real problem in doing empirical research. What compounds this problem is that developing countries are more affected than developed ones. Ironically, we are more...">
<meta name="twitter:description" content="Options in R Missing data is a real problem in doing empirical research. What compounds this problem is that developing countries are more affected than developed ones. Ironically, we are more...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title=""><p><img src="images/Crest_white.png" width="75" style="display:block; margin:auto; margin-bottom:3em;"> PO33Q: Determinants of Democracy – <br> Analysing Emergence, Survival, and Fall</p></a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Preface</a></li>
<li><a class="" href="website-features.html">Website Features</a></li>
<li><a class="" href="accessibility.html">Accessibility</a></li>
<li class="book-part">Week 1</li>
<li><a class="" href="introduction-to-r.html">Introduction to R</a></li>
<li><a class="" href="homework-for-week-2.html">Homework for Week 2</a></li>
<li><a class="" href="glossary.html">Glossary</a></li>
<li><a class="" href="flashcards.html">Flashcards</a></li>
<li class="book-part">Week 2</li>
<li><a class="" href="principles-of-statistical-inference.html">Principles of Statistical Inference</a></li>
<li><a class="" href="linear-regression---theory.html">Linear Regression - Theory</a></li>
<li><a class="" href="linear-regression-application.html">Linear Regression – Application</a></li>
<li><a class="" href="homework-for-week-3.html">Homework for Week 3</a></li>
<li><a class="" href="glossary-1.html">Glossary</a></li>
<li><a class="" href="flashcards-1.html">Flashcards</a></li>
<li class="book-part">Week 3</li>
<li><a class="" href="probit---theory.html">Probit - Theory</a></li>
<li><a class="" href="probit-application.html">Probit – Application</a></li>
<li><a class="" href="exercises.html">Exercises</a></li>
<li><a class="" href="homework-for-week-4.html">Homework for Week 4</a></li>
<li><a class="" href="glossary-2.html">Glossary</a></li>
<li><a class="" href="flashcards-2.html">Flashcards</a></li>
<li class="book-part">Week 4</li>
<li><a class="active" href="missing-data.html">Missing Data</a></li>
<li><a class="" href="model-building.html">Model Building</a></li>
<li><a class="" href="homework-for-week-5.html">Homework for Week 5</a></li>
<li><a class="" href="glossary-3.html">Glossary</a></li>
<li><a class="" href="flashcards-3.html">Flashcards</a></li>
<li class="book-part">Week 5</li>
<li><a class="" href="consolidation.html">Consolidation</a></li>
<li><a class="" href="exercises-1.html">Exercises</a></li>
<li><a class="" href="homework-for-week-7.html">Homework for Week 7</a></li>
<li><a class="" href="glossary-4.html">Glossary</a></li>
<li><a class="" href="flashcards-4.html">Flashcards</a></li>
<li class="book-part">Week 7</li>
<li><a class="" href="markov-transition-models.html">Markov Transition Models</a></li>
<li><a class="" href="model-fit-in-binary-response-models.html">Model Fit in Binary Response Models9</a></li>
<li><a class="" href="joint-estimation-of-emergence-and-survival.html">Joint Estimation of Emergence and Survival</a></li>
<li><a class="" href="exercises-2.html">Exercises</a></li>
<li><a class="" href="homework-for-week-8.html">Homework for Week 8</a></li>
<li><a class="" href="glossary-5.html">Glossary</a></li>
<li><a class="" href="flashcards-5.html">Flashcards</a></li>
<li class="book-part">Downloads</li>
<li><a class="" href="downloads.html">Downloads</a></li>
<li class="book-part">Glossary</li>
<li><a class="" href="glossary-6.html">Glossary</a></li>
<li class="book-part">List of References</li>
<li><a class="" href="list-of-references.html">List of References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><script src="sidebar-link.js"></script><div id="missing-data" class="section level1 unnumbered">
<h1>Missing Data<a class="anchor" aria-label="anchor" href="#missing-data"><i class="fas fa-link"></i></a>
</h1>
<div id="options-in-r" class="section level2 unnumbered">
<h2>Options in R<a class="anchor" aria-label="anchor" href="#options-in-r"><i class="fas fa-link"></i></a>
</h2>
<p>Missing data is a real problem in doing empirical research. What compounds this problem is that developing countries are more affected than developed ones. Ironically, we are more interested in developing countries in this module, and so this is going to become a real-life struggle for you over the coming weeks.</p>
<p>R has multiple ways in which to address missing data. We have already encountered the exclusion of missing values when using descriptive statistics within the <code>setx</code> function in Week 3, such as:</p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">europe2000</span><span class="op">$</span><span class="va">lifeexp</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>When we run regression models, for example through the function <code>lm</code>, R let’s you specify what you wish to do with observations (rows) that have missing values in them with the function <code>na.action</code>. This option has four logical options<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://faculty.nps.edu/sebuttre/home/R/missings.html" class="uri"&gt;https://faculty.nps.edu/sebuttre/home/R/missings.html&lt;/a&gt;&lt;/p&gt;'><sup>8</sup></a>:</p>
<ul>
<li>
<code>na.fail</code>: Stop if any missing values are encountered</li>
<li>
<code>na.omit</code>: Drop out any rows with missing values anywhere in them and forgets them forever.</li>
<li>
<code>na.exclude</code>: Drop out rows with missing values, but keeps track of where they were (so that when you make predictions, for example, you end up with a vector whose length is that of the original response.)</li>
<li>
<code>na.pass</code>: Take no action</li>
</ul>
<p>By default, R would apply <code>na.omit</code> which we call “<span class="gls"><a href="https://drfloreiche.github.io/PO33Q/glossary-2.html">listwise deletion</a></span>”. This means, that as soon as one value within an observation is missing, R drops that entire observation. This can potentially decimate the number of observations for analysis quite drastically! This in turn has implications for inference. Let me illustrate this.</p>
<hr>
</div>
<div id="methodological-implications" class="section level2 unnumbered">
<h2>Methodological Implications<a class="anchor" aria-label="anchor" href="#methodological-implications"><i class="fas fa-link"></i></a>
</h2>
<p>In an ideal world, we would have a data set in which each value is present (indicated by the presence of an x in each of the cells of this table):</p>
<p> </p>
<div class="custom-html-table">
<div class="inline-table"><table style="border-collapse: collapse; font-size: 90%; padding: 0; margin: 1em auto; width: 60%;" class="table table-sm">
<thead><tr>
<th style="padding: 0.2em; text-align: center;">
<strong>var1</strong>
</th>
<th style="padding: 0.2em; text-align: center;">
<strong>var2</strong>
</th>
<th style="padding: 0.2em; text-align: center;">
<strong>var3</strong>
</th>
<th style="padding: 0.2em; text-align: center;">
<strong>var4</strong>
</th>
</tr></thead>
<tbody>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
</tbody>
</table></div>
</div>
<p> </p>
<p>Unfortunately, in the real world, we are much more likely to have a Swiss cheese, such as this:</p>
<p> </p>
<div class="custom-html-table">
<div class="inline-table"><table style="border-collapse: collapse; font-size: 90%; padding: 0; margin: 1em auto; width: 60%;" class="table table-sm">
<thead><tr>
<th style="padding: 0.2em; text-align: center;">
<strong>var1</strong>
</th>
<th style="padding: 0.2em; text-align: center;">
<strong>var2</strong>
</th>
<th style="padding: 0.2em; text-align: center;">
<strong>var3</strong>
</th>
<th style="padding: 0.2em; text-align: center;">
<strong>var4</strong>
</th>
</tr></thead>
<tbody>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
<tr>
<td style="padding: 0.2em; text-align: center;">
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
</td>
</tr>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
<tr>
<td style="padding: 0.2em; text-align: center;">
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
</td>
</tr>
</tbody>
</table></div>
</div>
<p> </p>
<p>You will already have seen this when opening the data sets we are working with. In Figure <a href="missing-data.html#fig:missing">31</a>, for example, the variable <code>gdppc</code> only has three missing values, but <code>agri</code> is completely missing.</p>
<div class="figure">
<span style="display:block;" id="fig:missing"></span>
<img src="files/Week%204/missingdata.png" alt="\label{fig:missing}Excerpt from the `world` data set" width="80%"><p class="caption">
Figure 31: Excerpt from the <code>world</code> data set
</p>
</div>
<p>If you ran a regression model that uses the variable <code>agri</code>, listwise deletion would delete all observations and you would end up with no model. Here, the amount of observations you would lose is obvious. But since different variables have missing values in different places, it is often not as obvious as that. Assume, for example that we wished to use all four variables in our Schematic in Figure <a href="#fig:real"><strong>??</strong></a>. Even though the “missingness” problem looks much less pronounced than in the <code>agri</code> variable in the <code>world</code> data set (see Figure <a href="missing-data.html#fig:missing">31</a>, listwise deletion would ensure that we would only be left with two observations out of ten in our model:</p>
<p> </p>
<div class="custom-html-table">
<div class="inline-table"><table style="border-collapse: collapse; font-size: 90%; padding: 0; margin: 1em auto; width: 60%;" class="table table-sm">
<thead><tr>
<th style="padding: 0.2em; text-align: center;">
<strong>var1</strong>
</th>
<th style="padding: 0.2em; text-align: center;">
<strong>var2</strong>
</th>
<th style="padding: 0.2em; text-align: center;">
<strong>var3</strong>
</th>
<th style="padding: 0.2em; text-align: center;">
<strong>var4</strong>
</th>
</tr></thead>
<tbody>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
<tr>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
<td style="padding: 0.2em; text-align: center;">
x
</td>
</tr>
</tbody>
</table></div>
</div>
<p> </p>
<p>So what do you do when you find yourself in such a situation? An obvious answer would be to simply leave out a variable that has a high degree of missingness. This solution is flawed, however. If your theory tells you that the variable plays a role in measuring one of the concepts then leaving it out would create so-called omitted variable bias – a problem you really don’t want to have. A much better solution, therefore, is to use a proxy variable. Take <code>agri</code> as an example. It measures the percentage of GDP generated by agriculture, and would probably enter a statistical model to measure the transition of a traditional society (agricultural) to a modern, industrialised society. So, rather then measuring the move away from <code>agri</code>, you would also measure the transformation into industry. If you can find a variable measuring the percentage of GDP generated by the industry sector, and this variable has fewer observations missing, you could you it instead of <code>agri</code> and still be measuring the same thing.</p>
<p>Sometimes, it is not as straightforward as this, however, and you will have to resort to variables that have less measurement validity. Assume, for example, you want to measure the populations ability to read. Then <code>literacy</code> from our data set would be an obvious choice. But sadly, it has a high number of observations missing. An alternative is primary gross enrolment (<code>enrol_gross</code>), as pupils learn to read and write in primary school. This variable does not measure the characteristic we are interested in as directly as <code>literacy</code>, but it would allow us to include more observations in our model. It is an art to balance measurement validity against the number of observations, there is no hard and fast rule to help you make this decision. But as long as you discuss and explain your reasoning in the assessment, you will be fine for this module – after all, you are only starting out on this.</p>
</div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const buttons = document.querySelectorAll(".delayed-download");

    buttons.forEach(function (btn) {
      const releaseDate = new Date(btn.dataset.date);
      const now = new Date();

      if (now >= releaseDate) {
        btn.classList.remove("disabled");
        btn.setAttribute("aria-disabled", "false");
        btn.setAttribute("href", btn.dataset.path);
        btn.setAttribute("download", btn.dataset.path.split('/').pop());
        btn.innerHTML = btn.dataset.label || "📄 Download Document";
      }
    });
  });
</script><div class="chapter-nav">
<div class="prev"><a href="flashcards-2.html">Flashcards</a></div>
<div class="next"><a href="model-building.html">Model Building</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#missing-data">Missing Data</a></li>
<li><a class="nav-link" href="#options-in-r">Options in R</a></li>
<li><a class="nav-link" href="#methodological-implications">Methodological Implications</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong><p><img src="images/Crest_white.png" width="75" style="display:block; margin:auto; margin-bottom:3em;"> PO33Q: Determinants of Democracy – <br> Analysing Emergence, Survival, and Fall</p></strong>" was written by </p>
<p><strong>Dr Flo Reiche</strong> <br><strong>Department of Politics and International Studies</strong> <br><strong>University of Warwick</strong></p>. It was last built on 04 August, 2025.
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
